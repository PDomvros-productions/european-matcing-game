<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>European Nations Matching Game</title>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;800;900&display=swap" rel="stylesheet">
<style>
    :root {
        --neon-pink: #ff2a6d;
        --neon-cyan: #05d9e8;
        --dark-bg: #01012b;
    }
    
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: transparent;
    }

    body {
        /* Base background color gradient */
        background: radial-gradient(circle at center, #1b1b4b 0%, var(--dark-bg) 100%);
        font-family: 'M PLUS Rounded 1c', sans-serif;
        color: #fff;
        touch-action: none; 
        position: relative; 
        width: 100%;
        height: 100%;
    }

    /* Full-page container for the background image */
    .background-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('euromap.jpg');
        background-size: cover;
        background-position: center;
        opacity: 0.55;
        z-index: -1; 
        pointer-events: none;
    }

    /* Pseudo-element for the grid pattern, applied to background-container */
    .background-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: 
            linear-gradient(rgba(5, 217, 232, 0.15) 1px, transparent 1px), 
            linear-gradient(90deg, rgba(5, 217, 232, 0.15) 1px, transparent 1px); 
        background-size: 40px 40px;
        background-repeat: repeat;
        pointer-events: none;
    }

    /* Background overlay to ensure game readability - placed behind the map */
    .background-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(1, 1, 43, 0.2) 0%, rgba(1, 1, 43, 0.5) 100%);
        z-index: -2; 
        pointer-events: none;
    }

    #ui-layer {
        position: absolute;
        top: 2vw;
        left: 2vw;
        z-index: 10;
        display: none; 
    }

    #timer {
        font-size: clamp(1rem, 2.5vw, 2rem);
        font-weight: 800;
        background: var(--dark-bg);
        border: 2px solid var(--neon-cyan);
        box-shadow: 0 0 10px var(--neon-cyan);
        padding: 8px 15px;
        border-radius: 12px;
        text-shadow: 0 0 5px var(--neon-cyan);
    }

    /* Bubbles */
    .bubble {
        position: absolute;
        padding: clamp(4px, 1vw, 8px) clamp(8px, 1.5vw, 15px);
        border-radius: 20px;
        cursor: pointer;
        font-size: clamp(0.65rem, 1vw, 0.9rem);
        text-align: center;
        user-select: none;
        transition: transform 0.1s, box-shadow 0.1s, border 0.1s;
        max-width: clamp(80px, 15vw, 160px);
        word-wrap: break-word;
        z-index: 1;
    }

    .bubble:active { transform: scale(0.95); }
    
    .bubble.selected {
        box-shadow: 0 0 20px 5px #ffeb3b !important;
        transform: scale(1.1);
        border-color: #ffeb3b !important;
        z-index: 5;
    }

    .country { 
        background: var(--neon-pink); 
        color: #ffffff;
        font-weight: 800;
        border: 2px solid #ffffff;
        box-shadow: 0 0 10px var(--neon-pink);
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
    }
    
    .nickname { 
        background: var(--neon-cyan); 
        color: var(--dark-bg); 
        font-weight: 900;
        border: 2px solid #ffffff;
        box-shadow: 0 0 10px var(--neon-cyan);
    }
    
    /* Overlay screens */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(1, 1, 43, 0.6); 
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px); 
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 100;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
    }

    /* Targeted override for the Start Screen - far more transparent */
    #start-screen.overlay {
        background: rgba(1, 1, 43, 0.1); 
        backdrop-filter: blur(2px);     
        -webkit-backdrop-filter: blur(2px);
    }

    .title-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin-bottom: 5px;
        flex-wrap: wrap; 
    }

    .background-logo {
        height: clamp(80px, 12vw, 180px);
        opacity: 1; /* Fully opaque now */
        filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.9)); /* Stronger white glow to stand out */
        user-select: none;
    }

    .anime-title {
        font-size: clamp(2rem, 5vw, 4rem);
        margin: 0;
        color: #fff;
        text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink), 0 0 40px var(--neon-pink);
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .subtitle {
        font-size: clamp(1rem, 2vw, 1.5rem);
        color: #fff;
        margin-top: 10px;
        margin-bottom: 5px;
        text-shadow: 0 0 5px var(--neon-pink), 0 0 10px var(--neon-pink);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 800;
    }

    .instruction {
        font-size: clamp(1rem, 2.5vw, 1.8rem);
        color: var(--neon-cyan);
        margin-top: 15px;
        margin-bottom: 30px;
        text-shadow: 0 0 8px rgba(5, 217, 232, 0.8);
    }

    .time-toggle-container {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .time-btn {
        background: var(--dark-bg);
        color: #fff;
        border: 2px solid #fff;
        padding: 10px 20px;
        font-size: 1.2rem;
        font-family: inherit;
        font-weight: 800;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .time-btn.active {
        background: var(--neon-cyan);
        border-color: var(--neon-cyan);
        color: var(--dark-bg);
        box-shadow: 0 0 15px var(--neon-cyan);
    }

    .action-btn { 
        font-size: clamp(1.2rem, 3vw, 2rem); 
        cursor: pointer; 
        background: var(--neon-pink);
        color: white;
        font-family: inherit;
        font-weight: 800;
        border: 3px solid #fff;
        padding: 15px 40px;
        border-radius: 50px;
        box-shadow: 0 0 20px var(--neon-pink);
        transition: transform 0.2s, box-shadow 0.2s;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .action-btn:hover { 
        transform: scale(1.05);
        box-shadow: 0 0 30px var(--neon-pink);
    }

    #end-screen { display: none; }

    footer {
        position: fixed;
        bottom: 10px;
        width: 100%;
        text-align: center;
        font-size: clamp(0.55rem, 1vw, 0.85rem);
        color: rgba(255, 255, 255, 0.9);
        z-index: 1000; 
        pointer-events: none;
        font-weight: 800;
        text-shadow: 0 0 5px rgba(0,0,0,0.8); 
    }
</style>
</head>
<body>
    <div class="background-overlay"></div>
    <div class="background-container"></div>
    <div id="start-screen" class="overlay">
        <div class="title-wrapper">
            <img src="logo.png" alt="PyleaMUN Logo" class="background-logo">
            <h1 class="anime-title">European Nations<br>Matching Game</h1>
        </div>
        
        <p class="subtitle">A PyleaMUN 2027 Production</p>

        <p class="instruction">Match the European country to its nickname</p>
        
        <div class="time-toggle-container">
            <button class="time-btn active" data-time="60">60s</button>
            <button class="time-btn" data-time="90">90s</button>
            <button class="time-btn" data-time="120">120s</button>
            <button class="time-btn" data-time="180">180s</button>
        </div>

        <button class="action-btn" onclick="startGame()">Start Game</button>
    </div>

    <div id="ui-layer">
        <div id="timer">Time: 60</div>
    </div>
    
    <div id="game-board"></div>
    
    <div id="end-screen" class="overlay">
        <h1 id="end-message" class="anime-title">Time's Up!</h1>
        <button class="action-btn" onclick="location.reload()">Play Again</button>
    </div>

    <footer>Created by Panagiotis Domvros English and Drama Teacher, Principal of 1st Middle School of Pylea</footer>

    <script>
        const data = [
            { id: 1, c: "Albania", n: "Land of the Eagles" },
            { id: 2, c: "Austria", n: "The Alpine Republic" },
            { id: 3, c: "Belarus", n: "White Rus" },
            { id: 4, c: "Belgium", n: "The Battlefield of Europe" },
            { id: 5, c: "Cyprus", n: "Island of Aphrodite" },
            { id: 6, c: "Czech Republic", n: "The Heart of Europe" },
            { id: 7, c: "Estonia", n: "The Digital Republic" },
            { id: 8, c: "Finland", n: "Land of a Thousand Lakes" },
            { id: 9, c: "France", n: "The Hexagon" },
            { id: 10, c: "Germany", n: "Land of Poets and Thinkers" },
            { id: 11, c: "Greece", n: "The Cradle of Western Civilization" },
            { id: 12, c: "Iceland", n: "Land of Fire and Ice" },
            { id: 13, c: "Ireland", n: "The Emerald Isle" },
            { id: 14, c: "Italy", n: "The Boot" },
            { id: 15, c: "Latvia", n: "The Baltic Tiger" },
            { id: 16, c: "Luxembourg", n: "The Grand Duchy" },
            { id: 17, c: "Malta", n: "The George Cross Island" },
            { id: 18, c: "Monaco", n: "The Rock" },
            { id: 19, c: "Montenegro", n: "The Black Mountain" },
            { id: 20, c: "Norway", n: "Land of the Midnight Sun" },
            { id: 21, c: "Poland", n: "Land of Fields" },
            { id: 22, c: "Russia", n: "The Motherland" },
            { id: 23, c: "San Marino", n: "The Most Serene Republic" },
            { id: 24, c: "Slovenia", n: "The Sunny Side of the Alps" },
            { id: 25, c: "Spain", n: "The Bull Skin" },
            { id: 26, c: "Switzerland", n: "The Roof of Europe" },
            { id: 27, c: "Ukraine", n: "The Breadbasket of Europe" },
            { id: 28, c: "United Kingdom", n: "Albion" }
        ];

        const board = document.getElementById('game-board');
        let bubbles = [];
        let firstSelection = null;
        let selectedTime = 60;
        let timeRemaining = 0;
        let gameActive = false;
        let matchesFound = 0;
        let timerInterval;

        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                selectedTime = parseInt(e.target.getAttribute('data-time'));
            });
        });

        function createBubble(text, id, type) {
            const el = document.createElement('div');
            el.className = `bubble ${type}`;
            el.textContent = text;
            el.dataset.id = id;
            el.dataset.type = type;

            const maxX = window.innerWidth * 0.85;
            const maxY = window.innerHeight * 0.85;
            el.style.left = Math.max(0, Math.random() * maxX) + 'px';
            el.style.top = Math.max(0, Math.random() * maxY) + 'px';

            el.dx = (Math.random() - 0.5) * 1.5;
            el.dy = (Math.random() - 0.5) * 1.5;

            el.addEventListener('pointerdown', () => handleSelection(el));
            board.appendChild(el);
            bubbles.push(el);
        }

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('ui-layer').style.display = 'block';
            
            timeRemaining = selectedTime;
            document.getElementById('timer').textContent = `Time: ${timeRemaining}`;
            gameActive = true;

            data.forEach(item => {
                createBubble(item.c, item.id, 'country');
                createBubble(item.n, item.id, 'nickname');
            });

            timerInterval = setInterval(() => {
                if (!gameActive) return;
                timeRemaining--;
                document.getElementById('timer').textContent = `Time: ${timeRemaining}`;
                if (timeRemaining <= 0) {
                    endGame("TIME'S UP!");
                }
            }, 1000);

            animate();
        }

        function handleSelection(el) {
            if (!gameActive) return;

            if (!firstSelection) {
                firstSelection = el;
                el.classList.add('selected');
            } else {
                if (firstSelection === el) {
                    el.classList.remove('selected');
                    firstSelection = null;
                    return;
                }

                if (firstSelection.dataset.id === el.dataset.id && firstSelection.dataset.type !== el.dataset.type) {
                    firstSelection.style.display = 'none';
                    el.style.display = 'none';
                    firstSelection = null;
                    matchesFound++;
                    if (matchesFound === data.length) endGame("MISSION CLEAR!");
                } else {
                    firstSelection.classList.remove('selected');
                    el.classList.add('selected');
                    firstSelection = el;
                }
            }
        }

        function animate() {
            if (!gameActive) return;
            
            bubbles.forEach(el => {
                if (el.style.display === 'none') return;
                
                let x = parseFloat(el.style.left);
                let y = parseFloat(el.style.top);

                x += el.dx;
                y += el.dy;

                const rect = el.getBoundingClientRect();
                if (x < 0 || x > window.innerWidth - rect.width) el.dx *= -1;
                if (y < 0 || y > window.innerHeight - rect.height) el.dy *= -1;

                el.style.left = x + 'px';
                el.style.top = y + 'px';
            });
            requestAnimationFrame(animate);
        }

        function endGame(msg) {
            gameActive = false;
            clearInterval(timerInterval);
            document.getElementById('end-message').textContent = msg;
            document.getElementById('end-screen').style.display = 'flex';
        }
    </script>
</body>
</html>